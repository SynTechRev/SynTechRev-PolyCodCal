# Add Codecov Upload to CI Workflow

## Summary

This PR implements a comprehensive CI/CD pipeline with Codecov integration for the SynTechRev-PolyCodCal repository. The changes include:

- **CI Workflow**: GitHub Actions workflow with multi-Python version testing (3.9, 3.10, 3.11)
- **Codecov Integration**: Automated coverage reporting with XML upload to Codecov
- **Project Structure**: Created proper source and test directory structure
- **Comprehensive Tests**: Full test coverage (100%) for calculator module
- **Code Quality**: Integrated black, flake8, and mypy for code formatting and type checking
- **Documentation**: Updated README with CI and Codecov badges

## Changes Made

### CI Configuration (`.github/workflows/ci.yml`)
- Multi-Python version testing (3.9, 3.10, 3.11)
- Automated dependency installation (with conditional dev-requirements.txt)
- Pre-commit hooks execution
- Code formatting checks (black)
- Linting (flake8)
- Type checking (mypy)
- Test execution with coverage reporting
- **Codecov upload** with proper token handling (optional for public repos)

### Project Structure
```
src/
  syntechrev_polycodcal/
    __init__.py
    calculator.py
tests/
  __init__.py
  test_calculator.py
```

### Configuration Files
- `pyproject.toml`: Build system, pytest, coverage, black, and mypy configuration
- `dev-requirements.txt`: Development dependencies (pytest, pytest-cov, black, flake8, mypy, pre-commit)
- Updated `.gitignore`: Removed dev-requirements.txt exclusion
- Updated `README.md`: Added CI and Codecov badges

## Verification Steps

### Local Testing
✅ All tests pass with 100% coverage:
```bash
PYTHONPATH=src python3 -m pytest -v --cov=src/syntechrev_polycodcal --cov-report=xml --cov-report=term-missing tests
```

✅ Code formatting passes:
```bash
black --check src/ tests/
```

✅ Linting passes:
```bash
flake8 src/ tests/
```

✅ Type checking passes:
```bash
mypy src/
```

### CI Verification
- [ ] CI workflow runs successfully on GitHub Actions
- [ ] Coverage XML is generated and uploaded to Codecov
- [ ] All Python versions (3.9, 3.10, 3.11) pass tests
- [ ] Badges display correctly on README

## Coverage Report

Current coverage: **100%**

| File | Statements | Missing | Coverage |
|------|------------|---------|----------|
| `src/syntechrev_polycodcal/__init__.py` | 1 | 0 | 100% |
| `src/syntechrev_polycodcal/calculator.py` | 10 | 0 | 100% |
| **TOTAL** | **11** | **0** | **100%** |

## Codecov Configuration

The CI workflow includes the Codecov upload step using `codecov/codecov-action@v4`:
- Uses `with: token: ${{ secrets.CODECOV_TOKEN }}` (optional for public repos)
- Uploads `coverage.xml` generated by pytest-cov
- Set to `fail_ci_if_error: false` for graceful degradation
- Verbose mode enabled for debugging

## Links

- **GitHub Actions**: Will be available at `https://github.com/SynTechRev/SynTechRev-PolyCodCal/actions`
- **Codecov Dashboard**: Will be available at `https://codecov.io/gh/SynTechRev/SynTechRev-PolyCodCal`

## Pre-merge Checklist

- [x] Code formatted with black
- [x] Linting passes (flake8)
- [x] Type checking passes (mypy)
- [x] All tests pass locally
- [x] Coverage >= 90% (achieved 100%)
- [ ] CI workflow runs successfully on GitHub
- [ ] Codecov upload completes successfully
- [ ] Review requested

## Notes

- The repository now has a proper Python package structure following best practices
- Tests are comprehensive with 100% code coverage
- The CI workflow is configured to work with Ubuntu runners
- PYTHONPATH=src is used in the CI workflow for proper module imports
- Pre-commit hooks are configured but may need network access to install dependencies

## Post-Merge Tasks

After this PR is merged:
1. Verify badges render correctly on the main branch README
2. Check Codecov dashboard for coverage trends
3. Consider enabling branch protection rules requiring CI to pass before merge
